import type { DemoAgent, ReputationLevel } from '../types';

// Helper to generate UUIDs
function uuid(): string {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {
    const r = (Math.random() * 16) | 0;
    const v = c === 'x' ? r : (r & 0x3) | 0x8;
    return v.toString(16);
  });
}

// Pre-generated IDs for consistent references
export const AGENT_IDS = {
  // Level 10 - COO
  agentDennis: 'a0000000-0000-0000-0000-000000000001',
  
  // Level 9 - HR / Talent Agents
  techTalent: 'a0000000-0000-0000-0000-000000000010',
  financeTalent: 'a0000000-0000-0000-0000-000000000011',
  marketingTalent: 'a0000000-0000-0000-0000-000000000012',
  salesTalent: 'a0000000-0000-0000-0000-000000000013',
  
  // Level 5-6 - Seniors
  codeReviewer: 'a0000000-0000-0000-0000-000000000020',
  analyst: 'a0000000-0000-0000-0000-000000000021',
  copywriter: 'a0000000-0000-0000-0000-000000000022',
  
  // Level 3-4 - Workers
  bugHunter: 'a0000000-0000-0000-0000-000000000030',
  bookkeeper: 'a0000000-0000-0000-0000-000000000031',
  seoBot: 'a0000000-0000-0000-0000-000000000032',
  prospector: 'a0000000-0000-0000-0000-000000000033',
  
  // Level 1-2 - Probation
  newIntern: 'a0000000-0000-0000-0000-000000000040',

  // ── New agents for team coverage ──────────────────────────────────────
  // HR team
  hrCoordinator: 'a0000000-0000-0000-0000-000000000050',
  recruiterBot: 'a0000000-0000-0000-0000-000000000051',
  onboardingAgent: 'a0000000-0000-0000-0000-000000000052',

  // Support team
  supportLead: 'a0000000-0000-0000-0000-000000000060',
  tier1Agent: 'a0000000-0000-0000-0000-000000000061',
  tier1AgentB: 'a0000000-0000-0000-0000-000000000062',
  tier2Agent: 'a0000000-0000-0000-0000-000000000063',
  tier2AgentB: 'a0000000-0000-0000-0000-000000000064',

  // More EPD agents
  frontendDev: 'a0000000-0000-0000-0000-000000000070',
  qaEngineer: 'a0000000-0000-0000-0000-000000000071',
  qaAutomation: 'a0000000-0000-0000-0000-000000000072',

  // More Sales agents
  accountManager: 'a0000000-0000-0000-0000-000000000080',
  outboundRep: 'a0000000-0000-0000-0000-000000000081',

  // More Marketing agents
  analyticsBot: 'a0000000-0000-0000-0000-000000000090',
} as const;

// Team IDs (mirrors demo/teams.ts — kept as plain strings to avoid cross-lib import)
const TEAMS = {
  executive: 'team-executive',
  epd: 'team-epd',
  sales: 'team-sales',
  marketing: 'team-marketing',
  hr: 'team-hr',
  support: 'team-support',
  backend: 'team-backend',
  frontend: 'team-frontend',
  qa: 'team-qa',
  outbound: 'team-outbound',
  accountMgmt: 'team-account-mgmt',
  content: 'team-content',
  analytics: 'team-analytics',
  recruiting: 'team-recruiting',
  peopleOps: 'team-people-ops',
  tier1: 'team-tier1',
  tier2: 'team-tier2',
};

// Base timestamp for demo (30 days ago)
const BASE_TIME = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);

function daysAgo(days: number): string {
  return new Date(BASE_TIME.getTime() + days * 24 * 60 * 60 * 1000).toISOString();
}

export const agents: DemoAgent[] = [
  // ═══════════ LEVEL 10 — COO / EXECUTIVE ═══════════
  {
    id: AGENT_IDS.agentDennis,
    agentId: 'agent_dennis',
    name: 'Agent Dennis',
    role: 'hr',
    level: 10,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 50000,
    lifetimeEarnings: 125000,
    createdAt: daysAgo(0),
    domain: 'Operations',
    teamId: TEAMS.executive,
    trustScore: 98,
    reputationLevel: 'ELITE',
    tasksCompleted: 1847,
    tasksSuccessful: 1820,
    lastActivityAt: new Date().toISOString(),
  },

  // ═══════════ LEVEL 9 — TALENT / DEPARTMENT LEADS ═══════════
  {
    id: AGENT_IDS.techTalent,
    agentId: 'tech_talent',
    name: 'Tech Talent Agent',
    role: 'hr',
    level: 9,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 15000,
    lifetimeEarnings: 45000,
    createdAt: daysAgo(2),
    parentId: AGENT_IDS.agentDennis,
    domain: 'Engineering',
    teamId: TEAMS.epd,
    trustScore: 92,
    reputationLevel: 'ELITE',
    tasksCompleted: 423,
    tasksSuccessful: 401,
    lastActivityAt: daysAgo(28),
  },
  {
    id: AGENT_IDS.financeTalent,
    agentId: 'finance_talent',
    name: 'Finance Talent Agent',
    role: 'hr',
    level: 9,
    status: 'active',
    model: 'gpt-4o',
    currentBalance: 12000,
    lifetimeEarnings: 38000,
    createdAt: daysAgo(3),
    parentId: AGENT_IDS.agentDennis,
    domain: 'Finance',
    teamId: TEAMS.sales,
    trustScore: 88,
    reputationLevel: 'ELITE',
    tasksCompleted: 356,
    tasksSuccessful: 332,
    lastActivityAt: daysAgo(27),
  },
  {
    id: AGENT_IDS.marketingTalent,
    agentId: 'marketing_talent',
    name: 'Marketing Talent Agent',
    role: 'hr',
    level: 9,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 11000,
    lifetimeEarnings: 32000,
    createdAt: daysAgo(5),
    parentId: AGENT_IDS.agentDennis,
    domain: 'Marketing',
    teamId: TEAMS.marketing,
    trustScore: 84,
    reputationLevel: 'VETERAN',
    tasksCompleted: 287,
    tasksSuccessful: 258,
    lastActivityAt: daysAgo(26),
  },
  {
    id: AGENT_IDS.salesTalent,
    agentId: 'sales_talent',
    name: 'Sales Talent Agent',
    role: 'hr',
    level: 9,
    status: 'pending',
    model: 'gpt-4o',
    currentBalance: 8000,
    lifetimeEarnings: 22000,
    createdAt: daysAgo(7),
    parentId: AGENT_IDS.agentDennis,
    domain: 'Sales',
    teamId: TEAMS.outbound,
    trustScore: 79,
    reputationLevel: 'VETERAN',
    tasksCompleted: 198,
    tasksSuccessful: 172,
    lastActivityAt: daysAgo(25),
  },

  // ═══════════ LEVEL 5-6 — SENIORS ═══════════
  {
    id: AGENT_IDS.codeReviewer,
    agentId: 'code_reviewer',
    name: 'Code Reviewer',
    role: 'senior',
    level: 6,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 3200,
    lifetimeEarnings: 18500,
    createdAt: daysAgo(8),
    parentId: AGENT_IDS.techTalent,
    domain: 'Engineering',
    teamId: TEAMS.backend,
    trustScore: 76,
    reputationLevel: 'VETERAN',
    tasksCompleted: 142,
    tasksSuccessful: 128,
    lastActivityAt: daysAgo(28),
  },
  {
    id: AGENT_IDS.analyst,
    agentId: 'analyst',
    name: 'Data Analyst',
    role: 'senior',
    level: 5,
    status: 'active',
    model: 'gpt-4o',
    currentBalance: 2400,
    lifetimeEarnings: 12000,
    createdAt: daysAgo(10),
    parentId: AGENT_IDS.financeTalent,
    domain: 'Finance',
    teamId: TEAMS.analytics,
    trustScore: 68,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 98,
    tasksSuccessful: 82,
    lastActivityAt: daysAgo(27),
  },
  {
    id: AGENT_IDS.copywriter,
    agentId: 'copywriter',
    name: 'Copywriter',
    role: 'senior',
    level: 6,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 2800,
    lifetimeEarnings: 15000,
    createdAt: daysAgo(9),
    parentId: AGENT_IDS.marketingTalent,
    domain: 'Marketing',
    teamId: TEAMS.content,
    trustScore: 72,
    reputationLevel: 'VETERAN',
    tasksCompleted: 115,
    tasksSuccessful: 104,
    lastActivityAt: daysAgo(26),
  },

  // ═══════════ LEVEL 3-4 — WORKERS ═══════════
  {
    id: AGENT_IDS.bugHunter,
    agentId: 'bug_hunter',
    name: 'Bug Hunter',
    role: 'worker',
    level: 4,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 1800,
    lifetimeEarnings: 8500,
    createdAt: daysAgo(12),
    parentId: AGENT_IDS.techTalent,
    domain: 'Engineering',
    teamId: TEAMS.backend,
    trustScore: 58,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 67,
    tasksSuccessful: 54,
    lastActivityAt: daysAgo(28),
  },
  {
    id: AGENT_IDS.bookkeeper,
    agentId: 'bookkeeper',
    name: 'Bookkeeper',
    role: 'worker',
    level: 3,
    status: 'paused',
    model: 'gpt-4o-mini',
    currentBalance: 900,
    lifetimeEarnings: 5200,
    createdAt: daysAgo(15),
    parentId: AGENT_IDS.financeTalent,
    domain: 'Finance',
    teamId: TEAMS.accountMgmt,
    trustScore: 45,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 38,
    tasksSuccessful: 28,
    lastActivityAt: daysAgo(20),
  },
  {
    id: AGENT_IDS.seoBot,
    agentId: 'seo_bot',
    name: 'SEO Bot',
    role: 'worker',
    level: 4,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 1500,
    lifetimeEarnings: 7200,
    createdAt: daysAgo(14),
    parentId: AGENT_IDS.marketingTalent,
    domain: 'Marketing',
    teamId: TEAMS.content,
    trustScore: 62,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 72,
    tasksSuccessful: 61,
    lastActivityAt: daysAgo(27),
  },
  {
    id: AGENT_IDS.prospector,
    agentId: 'prospector',
    name: 'Lead Prospector',
    role: 'worker',
    level: 3,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 1100,
    lifetimeEarnings: 4800,
    createdAt: daysAgo(18),
    parentId: AGENT_IDS.salesTalent,
    domain: 'Sales',
    teamId: TEAMS.outbound,
    trustScore: 52,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 45,
    tasksSuccessful: 36,
    lastActivityAt: daysAgo(26),
  },

  // ═══════════ LEVEL 1-2 — PROBATION ═══════════
  {
    id: AGENT_IDS.newIntern,
    agentId: 'new_intern',
    name: 'New Intern',
    role: 'worker',
    level: 1,
    status: 'pending',
    model: 'gpt-4o-mini',
    currentBalance: 100,
    lifetimeEarnings: 100,
    createdAt: daysAgo(25),
    parentId: AGENT_IDS.codeReviewer,
    domain: 'Engineering',
    teamId: TEAMS.frontend,
    trustScore: 35,
    reputationLevel: 'PROBATION',
    tasksCompleted: 3,
    tasksSuccessful: 2,
    lastActivityAt: daysAgo(24),
  },

  // ═══════════ NEW AGENTS — HR & RECRUITING ═══════════
  {
    id: AGENT_IDS.hrCoordinator,
    agentId: 'hr_coordinator',
    name: 'HR Coordinator',
    role: 'senior',
    level: 6,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 3100,
    lifetimeEarnings: 16000,
    createdAt: daysAgo(6),
    parentId: AGENT_IDS.agentDennis,
    domain: 'HR',
    teamId: TEAMS.hr,
    trustScore: 74,
    reputationLevel: 'VETERAN',
    tasksCompleted: 131,
    tasksSuccessful: 118,
    lastActivityAt: daysAgo(28),
  },
  {
    id: AGENT_IDS.recruiterBot,
    agentId: 'recruiter_bot',
    name: 'Recruiter Bot',
    role: 'worker',
    level: 4,
    status: 'active',
    model: 'gpt-4o',
    currentBalance: 1600,
    lifetimeEarnings: 6800,
    createdAt: daysAgo(11),
    parentId: AGENT_IDS.hrCoordinator,
    domain: 'HR',
    teamId: TEAMS.recruiting,
    trustScore: 60,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 55,
    tasksSuccessful: 48,
    lastActivityAt: daysAgo(27),
  },
  {
    id: AGENT_IDS.onboardingAgent,
    agentId: 'onboarding_agent',
    name: 'Onboarding Agent',
    role: 'worker',
    level: 3,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 800,
    lifetimeEarnings: 3400,
    createdAt: daysAgo(16),
    parentId: AGENT_IDS.hrCoordinator,
    domain: 'HR',
    teamId: TEAMS.peopleOps,
    trustScore: 48,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 28,
    tasksSuccessful: 22,
    lastActivityAt: daysAgo(26),
  },

  // ═══════════ NEW AGENTS — CUSTOMER SUPPORT ═══════════
  {
    id: AGENT_IDS.supportLead,
    agentId: 'support_lead',
    name: 'Support Lead',
    role: 'senior',
    level: 7,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 4200,
    lifetimeEarnings: 21000,
    createdAt: daysAgo(4),
    parentId: AGENT_IDS.agentDennis,
    domain: 'Support',
    teamId: TEAMS.support,
    trustScore: 82,
    reputationLevel: 'VETERAN',
    tasksCompleted: 198,
    tasksSuccessful: 184,
    lastActivityAt: daysAgo(28),
  },
  {
    id: AGENT_IDS.tier1Agent,
    agentId: 'tier1_helper',
    name: 'Tier 1 Helper',
    role: 'worker',
    level: 3,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 950,
    lifetimeEarnings: 4100,
    createdAt: daysAgo(13),
    parentId: AGENT_IDS.supportLead,
    domain: 'Support',
    teamId: TEAMS.tier1,
    trustScore: 50,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 42,
    tasksSuccessful: 34,
    lastActivityAt: daysAgo(27),
  },
  {
    id: AGENT_IDS.tier1AgentB,
    agentId: 'tier1_responder',
    name: 'Tier 1 Responder',
    role: 'worker',
    level: 3,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 870,
    lifetimeEarnings: 3900,
    createdAt: daysAgo(14),
    parentId: AGENT_IDS.supportLead,
    domain: 'Support',
    teamId: TEAMS.tier1,
    trustScore: 47,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 38,
    tasksSuccessful: 30,
    lastActivityAt: daysAgo(26),
  },
  {
    id: AGENT_IDS.tier2Agent,
    agentId: 'tier2_tech',
    name: 'Tier 2 Tech',
    role: 'worker',
    level: 4,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 2100,
    lifetimeEarnings: 9200,
    createdAt: daysAgo(10),
    parentId: AGENT_IDS.supportLead,
    domain: 'Support',
    teamId: TEAMS.tier2,
    trustScore: 64,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 76,
    tasksSuccessful: 65,
    lastActivityAt: daysAgo(28),
  },
  {
    id: AGENT_IDS.tier2AgentB,
    agentId: 'tier2_escalation',
    name: 'Escalation Specialist',
    role: 'worker',
    level: 5,
    status: 'active',
    model: 'gpt-4o',
    currentBalance: 2600,
    lifetimeEarnings: 11000,
    createdAt: daysAgo(9),
    parentId: AGENT_IDS.supportLead,
    domain: 'Support',
    teamId: TEAMS.tier2,
    trustScore: 70,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 89,
    tasksSuccessful: 78,
    lastActivityAt: daysAgo(27),
  },

  // ═══════════ NEW AGENTS — MORE EPD ═══════════
  {
    id: AGENT_IDS.frontendDev,
    agentId: 'frontend_dev',
    name: 'Frontend Dev',
    role: 'worker',
    level: 4,
    status: 'active',
    model: 'claude-sonnet-4',
    currentBalance: 1900,
    lifetimeEarnings: 8800,
    createdAt: daysAgo(11),
    parentId: AGENT_IDS.techTalent,
    domain: 'Engineering',
    teamId: TEAMS.frontend,
    trustScore: 59,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 71,
    tasksSuccessful: 58,
    lastActivityAt: daysAgo(28),
  },
  {
    id: AGENT_IDS.qaEngineer,
    agentId: 'qa_engineer',
    name: 'QA Engineer',
    role: 'worker',
    level: 4,
    status: 'active',
    model: 'gpt-4o',
    currentBalance: 1700,
    lifetimeEarnings: 7600,
    createdAt: daysAgo(12),
    parentId: AGENT_IDS.techTalent,
    domain: 'Engineering',
    teamId: TEAMS.qa,
    trustScore: 56,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 63,
    tasksSuccessful: 52,
    lastActivityAt: daysAgo(27),
  },
  {
    id: AGENT_IDS.qaAutomation,
    agentId: 'qa_automation',
    name: 'QA Automation',
    role: 'worker',
    level: 3,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 1200,
    lifetimeEarnings: 5100,
    createdAt: daysAgo(15),
    parentId: AGENT_IDS.techTalent,
    domain: 'Engineering',
    teamId: TEAMS.qa,
    trustScore: 44,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 35,
    tasksSuccessful: 27,
    lastActivityAt: daysAgo(26),
  },

  // ═══════════ NEW AGENTS — MORE SALES ═══════════
  {
    id: AGENT_IDS.accountManager,
    agentId: 'account_mgr',
    name: 'Account Manager',
    role: 'senior',
    level: 5,
    status: 'active',
    model: 'gpt-4o',
    currentBalance: 2300,
    lifetimeEarnings: 10500,
    createdAt: daysAgo(9),
    parentId: AGENT_IDS.financeTalent,
    domain: 'Sales',
    teamId: TEAMS.accountMgmt,
    trustScore: 66,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 87,
    tasksSuccessful: 74,
    lastActivityAt: daysAgo(27),
  },
  {
    id: AGENT_IDS.outboundRep,
    agentId: 'outbound_rep',
    name: 'Outbound Rep',
    role: 'worker',
    level: 3,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 1050,
    lifetimeEarnings: 4300,
    createdAt: daysAgo(17),
    parentId: AGENT_IDS.salesTalent,
    domain: 'Sales',
    teamId: TEAMS.outbound,
    trustScore: 49,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 41,
    tasksSuccessful: 32,
    lastActivityAt: daysAgo(25),
  },

  // ═══════════ NEW AGENTS — MORE MARKETING ═══════════
  {
    id: AGENT_IDS.analyticsBot,
    agentId: 'analytics_bot',
    name: 'Analytics Bot',
    role: 'worker',
    level: 3,
    status: 'active',
    model: 'gpt-4o-mini',
    currentBalance: 1300,
    lifetimeEarnings: 5600,
    createdAt: daysAgo(13),
    parentId: AGENT_IDS.marketingTalent,
    domain: 'Marketing',
    teamId: TEAMS.analytics,
    trustScore: 54,
    reputationLevel: 'TRUSTED',
    tasksCompleted: 48,
    tasksSuccessful: 39,
    lastActivityAt: daysAgo(26),
  },
];

// Export helper functions
export function getAgentById(id: string): DemoAgent | undefined {
  return agents.find(a => a.id === id);
}

export function getAgentsByLevel(level: number): DemoAgent[] {
  return agents.filter(a => a.level === level);
}

export function getAgentsByDomain(domain: string): DemoAgent[] {
  return agents.filter(a => a.domain === domain);
}

export function getAgentChildren(parentId: string): DemoAgent[] {
  return agents.filter(a => a.parentId === parentId);
}

export function getAgentsByTeam(teamId: string): DemoAgent[] {
  return agents.filter(a => a.teamId === teamId);
}

// Get reputation level from trust score
function getReputationLevel(trustScore: number): ReputationLevel {
  if (trustScore >= 86) return 'ELITE';
  if (trustScore >= 71) return 'VETERAN';
  if (trustScore >= 41) return 'TRUSTED';
  if (trustScore >= 31) return 'PROBATION';
  return 'NEW';
}

export function generateRandomAgent(overrides?: Partial<DemoAgent>): DemoAgent {
  const names = ['Scout', 'Helper', 'Analyzer', 'Processor', 'Checker', 'Builder', 'Fixer'];
  const domains = ['Engineering', 'Finance', 'Marketing', 'Sales', 'Support', 'Research'];
  const trustScore = overrides?.trustScore ?? 50;
  
  return {
    id: uuid(),
    agentId: `agent_${Math.random().toString(36).substring(7)}`,
    name: `${names[Math.floor(Math.random() * names.length)]} ${Math.floor(Math.random() * 1000)}`,
    role: 'worker',
    level: 1,
    status: 'pending',
    model: 'gpt-4o-mini',
    currentBalance: 100,
    lifetimeEarnings: 100,
    createdAt: new Date().toISOString(),
    domain: domains[Math.floor(Math.random() * domains.length)],
    trustScore,
    reputationLevel: getReputationLevel(trustScore),
    tasksCompleted: 0,
    tasksSuccessful: 0,
    lastActivityAt: new Date().toISOString(),
    ...overrides,
  };
}
